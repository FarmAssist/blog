{"ast":null,"code":"import { auth, googleProvider } from \"../Firebase\";\nimport { useCookies } from \"react-cookie\";\nexport var GET_USER = \"get_user\";\nexport var USER_STATUS = \"user_status\";\nexport function getUser() {\n  return function (dispatch) {\n    dispatch({\n      type: USER_STATUS,\n      payload: true\n    });\n    auth.onAuthStateChanged(function (user) {\n      dispatch({\n        type: GET_USER,\n        payload: user\n      });\n      dispatch({\n        type: USER_STATUS,\n        payload: false\n      });\n    });\n  };\n}\nfirebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE);\n/*export function login(email, password, username) {\r\n  console.log(email);\r\n  // Cookies.set(\"username\", username, \"/\");\r\n\r\n  return dispatch => {\r\n    auth.signInWithEmailAndPassword(email, password);\r\n    useCookies(\"username\", username, { path: \"/\" });\r\n  };\r\n}*/\n\nexport function login(email, password) {\n  return function (dispatch) {\n    auth.signInWithEmailAndPassword(email, password).then(function (user) {\n      return user.getIdToken().then(function (idToken) {\n        var csrfToken = getCookie(\"csrfToken\");\n        return postIdTokenToSessionLogin(\"/Login\", idToken, csrfToken);\n      });\n    }).then(function () {\n      return auth().signOut();\n    }).then(function () {\n      window.location.assign(\"/\");\n    });\n  };\n}\nexport function logout() {\n  return function (dispatch) {\n    return auth.signOut();\n  };\n}\nexport function createAccount(email, password) {\n  return function (dispatch) {\n    return auth.createUserWithEmailAndPassword(email, password);\n  };\n}","map":{"version":3,"sources":["C:\\Users\\kanto\\OneDrive\\Desktop\\blog\\src\\Actions\\UserActions.jsx"],"names":["auth","googleProvider","useCookies","GET_USER","USER_STATUS","getUser","dispatch","type","payload","onAuthStateChanged","user","firebase","setPersistence","Auth","Persistence","NONE","login","email","password","signInWithEmailAndPassword","then","getIdToken","idToken","csrfToken","getCookie","postIdTokenToSessionLogin","signOut","window","location","assign","logout","createAccount","createUserWithEmailAndPassword"],"mappings":"AAAA,SAASA,IAAT,EAAeC,cAAf,QAAqC,aAArC;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,OAAO,IAAMC,QAAQ,GAAG,UAAjB;AACP,OAAO,IAAMC,WAAW,GAAG,aAApB;AAEP,OAAO,SAASC,OAAT,GAAmB;AACxB,SAAO,UAAAC,QAAQ,EAAI;AACjBA,IAAAA,QAAQ,CAAC;AACPC,MAAAA,IAAI,EAAEH,WADC;AAEPI,MAAAA,OAAO,EAAE;AAFF,KAAD,CAAR;AAIAR,IAAAA,IAAI,CAACS,kBAAL,CAAwB,UAAAC,IAAI,EAAI;AAC9BJ,MAAAA,QAAQ,CAAC;AACPC,QAAAA,IAAI,EAAEJ,QADC;AAEPK,QAAAA,OAAO,EAAEE;AAFF,OAAD,CAAR;AAIAJ,MAAAA,QAAQ,CAAC;AACPC,QAAAA,IAAI,EAAEH,WADC;AAEPI,QAAAA,OAAO,EAAE;AAFF,OAAD,CAAR;AAID,KATD;AAUD,GAfD;AAgBD;AAEDG,QAAQ,CAACX,IAAT,GAAgBY,cAAhB,CAA+BD,QAAQ,CAACX,IAAT,CAAca,IAAd,CAAmBC,WAAnB,CAA+BC,IAA9D;AAEA;;;;;;;;;;AASA,OAAO,SAASC,KAAT,CAAeC,KAAf,EAAsBC,QAAtB,EAAgC;AACrC,SAAO,UAAAZ,QAAQ,EAAI;AACjBN,IAAAA,IAAI,CACDmB,0BADH,CAC8BF,KAD9B,EACqCC,QADrC,EAEGE,IAFH,CAEQ,UAAAV,IAAI,EAAI;AACZ,aAAOA,IAAI,CAACW,UAAL,GAAkBD,IAAlB,CAAuB,UAAAE,OAAO,EAAI;AACvC,YAAMC,SAAS,GAAGC,SAAS,CAAC,WAAD,CAA3B;AACA,eAAOC,yBAAyB,CAAC,QAAD,EAAWH,OAAX,EAAoBC,SAApB,CAAhC;AACD,OAHM,CAAP;AAID,KAPH,EAQGH,IARH,CAQQ,YAAM;AACV,aAAOpB,IAAI,GAAG0B,OAAP,EAAP;AACD,KAVH,EAWGN,IAXH,CAWQ,YAAM;AACVO,MAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,GAAvB;AACD,KAbH;AAcD,GAfD;AAgBD;AAED,OAAO,SAASC,MAAT,GAAkB;AACvB,SAAO,UAAAxB,QAAQ;AAAA,WAAIN,IAAI,CAAC0B,OAAL,EAAJ;AAAA,GAAf;AACD;AAED,OAAO,SAASK,aAAT,CAAuBd,KAAvB,EAA8BC,QAA9B,EAAwC;AAC7C,SAAO,UAAAZ,QAAQ;AAAA,WAAIN,IAAI,CAACgC,8BAAL,CAAoCf,KAApC,EAA2CC,QAA3C,CAAJ;AAAA,GAAf;AACD","sourcesContent":["import { auth, googleProvider } from \"../Firebase\";\r\nimport { useCookies } from \"react-cookie\";\r\nexport const GET_USER = \"get_user\";\r\nexport const USER_STATUS = \"user_status\";\r\n\r\nexport function getUser() {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: USER_STATUS,\r\n      payload: true\r\n    });\r\n    auth.onAuthStateChanged(user => {\r\n      dispatch({\r\n        type: GET_USER,\r\n        payload: user\r\n      });\r\n      dispatch({\r\n        type: USER_STATUS,\r\n        payload: false\r\n      });\r\n    });\r\n  };\r\n}\r\n\r\nfirebase.auth().setPersistence(firebase.auth.Auth.Persistence.NONE);\r\n\r\n/*export function login(email, password, username) {\r\n  console.log(email);\r\n  // Cookies.set(\"username\", username, \"/\");\r\n\r\n  return dispatch => {\r\n    auth.signInWithEmailAndPassword(email, password);\r\n    useCookies(\"username\", username, { path: \"/\" });\r\n  };\r\n}*/\r\nexport function login(email, password) {\r\n  return dispatch => {\r\n    auth\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then(user => {\r\n        return user.getIdToken().then(idToken => {\r\n          const csrfToken = getCookie(\"csrfToken\");\r\n          return postIdTokenToSessionLogin(\"/Login\", idToken, csrfToken);\r\n        });\r\n      })\r\n      .then(() => {\r\n        return auth().signOut();\r\n      })\r\n      .then(() => {\r\n        window.location.assign(\"/\");\r\n      });\r\n  };\r\n}\r\n\r\nexport function logout() {\r\n  return dispatch => auth.signOut();\r\n}\r\n\r\nexport function createAccount(email, password) {\r\n  return dispatch => auth.createUserWithEmailAndPassword(email, password);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}